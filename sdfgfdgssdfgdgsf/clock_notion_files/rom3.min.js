"use strict";!function(a){var n,o="https://devnull.perfops.net",t="https://rum-cdn.perfops.net/providers",c=3e5,r=6e4,p=3,e=-1!==function(){}.toString().indexOf("minified")?{logInfo:console.log,logError:console.error}:{logInfo:function(){},logError:function(){}},i=e.logInfo,s=e.logError,d=window.rum?window.rum.key:void 0;function h(n){return Math.max(0,Number(n.toFixed(2)))}function u(c,n){var e=1<arguments.length&&void 0!==n?n:{},t=e.cb,r=void 0===t?function(){}:t,o=e.data,p=e.method,i=void 0===p?"GET":p,s=e.timeout,d=void 0===s?3e3:s;return new a(function(n,e){var t=new XMLHttpRequest;t.onload=function(){return n(t)},t.ontimeout=function(){e("timeout")},t.onerror=function(){var n="Unknown error happen when fetching ".concat(c);0!==t.status&&(n="Error happen when fetching ".concat(c,". Status ").concat(t.status,". Response: ").concat(t.statusText)),e(new Error(n))},t.open(i,c),t.timeout=d,r(t),t.send(o)})}function f(n){r=n.interval?1e3*parseInt(n.interval):r,n.repeats&&(p="Infinite"===n.repeats?Math.pow(2,32):parseInt(n.repeats))}function l(){var e=0;setTimeout(function n(){(function(){var e="perfops-rum-resources",n=JSON.parse(window.localStorage.getItem(e));return n&&n.expiry>Date.now()?(n.config&&f(n.config),a.resolve(n.data)):u(t).then(function(n){return JSON.parse(n.response)}).then(function(n){if(!n||!n.data||!n.data.length)throw new Error("Empty response.data");return window.localStorage.setItem(e,JSON.stringify({data:n.data,config:n.config,expiry:Date.now()+c})),n.config&&f(n.config),n.data}).catch(function(){return[{id:38,cdnUrl:"https://perf.psychz.net/500b-bench.jpg",p:0},{id:43,cdnUrl:"https://34-23.b.cdn12.com/500b-bench.jpg",p:0},{id:1,cdnUrl:"https://beluga-cdn.perfops.io/nusec.jpg",p:1},{id:40,cdnUrl:"https://swifty-cdn.perfops.io/500b-sw-bench.jpg",p:0},{id:46,cdnUrl:"https://perfops-cc.cdn-tech.cn/500b-cc-cn-bench.jpg",p:0},{id:7,cdnUrl:"https://google-cdn.perfops.io/500b-google-bench.jpg",p:1},{id:15,cdnUrl:"https://cdnperf-rum.cdnetworks.net/500b-bench.jpg",p:1},{id:6,cdnUrl:"https://key-cdn.perfops.io/500b-key-bench.jpg",p:1},{id:4,cdnUrl:"https://fastly.jsdelivr.net/gh/ProspectOne/js-test@1.1/500b-bench.jpg",p:1},{id:50,cdnUrl:"https://perfops-cnc.cdn-tech.cn/500b-bench.jpg",p:0},{id:14,cdnUrl:"https://perfops.r.worldssl.net/500b-bench.jpg",p:1},{id:9,cdnUrl:"https://cdn77-cdn.perfops.io/500b-bench.jpg",p:1},{id:36,cdnUrl:"https://perfops-cc.cdn-tech.io/500b-cc-bench.jpg",p:0},{id:61,cdnUrl:"https://img-perfops.mncdn.com/500b-bench.jpg",p:0},{id:11,cdnUrl:"https://bunny-cdn.perfops.io/500b-bunny-bench.jpg",p:1},{id:3,cdnUrl:"https://perfops.perfstack.cf-china.info/500b-bench.jpg",p:1},{id:10,cdnUrl:"https://akamai-cdn.perfops.io/500b-bench.jpg",p:1},{id:55,cdnUrl:"https://perfops.s.llnwi.net/500b-bench.jpg",p:1},{id:52,cdnUrl:"https://perfops.s.llnwi.net/500b-bench.jpg",p:0},{id:59,cdnUrl:"https://user48356.clients-cdnnow.ru/500b-bench.jpg",p:0},{id:18,cdnUrl:"https://azure-perfops.azureedge.net/500b-bench.jpg",p:1},{id:8,cdnUrl:"https://perfops.gcorelabs.com/500b-bench.jpg",p:1},{id:13,cdnUrl:"https://m9d7v5r2.map2.ssl.hwcdn.net/500b-bench.jpg",p:1},{id:45,cdnUrl:"https://perfops21cdn2.cdnvideo.ru/500b-bench.jpg",p:0},{id:20,cdnUrl:"https://cdnperf.cachefly.net/500b-bench.jpg",p:1},{id:44,cdnUrl:"https://perfops21cdn.cdnvideo.ru/500b-bench.jpg",p:0},{id:58,cdnUrl:"https://perfops.s.llnwi.net/v2/500b-bench.jpg",p:0},{id:57,cdnUrl:"https://80639-httpcache1.dna.ip-only.net/80639-httpcache1/500b-bench.jpg",p:0},{id:51,cdnUrl:"https://test-perfops.baishancdnx.cn/500b-baishancdn-bench.jpg",p:0},{id:22,cdnUrl:"https://09d3da8545e855ce.cdn.gocache.net/500b-bench.jpg",p:0},{id:2,cdnUrl:"https://ovh-cdn.perfops.io/500b-bench.jpg",p:1},{id:5,cdnUrl:"https://d2axgrpnciinw7.cloudfront.net/500b-bench.jpg",p:1},{id:24,cdnUrl:"https://img-cdnperf.mncdn.com/500b-bench.jpg",p:0},{id:17,cdnUrl:"https://edgecast-cdn.perfops.io/500b-bench.jpg",p:1},{id:12,cdnUrl:"https://cdn.jsdelivr.net/gh/jimaek/js-test@1.1/500b-bench.jpg",p:1},{id:35,cdnUrl:"https://cdn81795137.blazingcdn.net/500b-blz-bench.jpg",p:1},{id:54,cdnUrl:"https://perfops.r1c.io/arvancloud-bench.jpg",p:1},{id:47,cdnUrl:"https://perfops-cdnn.cdn-tech.io/500b-cdnn-bench.jpg",p:0},{id:53,cdnUrl:"https://cdnperf.ngenix.net/500b-ng-bench.jpg",p:0},{id:48,cdnUrl:"https://perfops-vrzn.cdn-tech.io/500b-vrzn-bench.jpg",p:0},{id:42,cdnUrl:"https://perfops.5centscdn.com/500b-5cents-bench.jpg",p:1},{id:41,cdnUrl:"https://25748s.ha.azioncdn.net/500b-az-bench.jpg",p:0},{id:30,cdnUrl:"https://perfops.doracdn.com/500b-db-bench.jpg",p:0}]})})().then(function(n){var e={ua:navigator.userAgent,hostname:window.location.hostname,client:d},t=[];performance.clearResourceTimings();function c(){var n=t.splice(0,t.length);return function(n){var e=0,t=0;return n.forEach(function(n){n.up?2e3<n.time&&e++:t++}),t+e<n.length}(n)?function(n,e){return u("".concat(o,"/rum/v1"),{data:JSON.stringify({metadata:n,data:e}),method:"POST"}).catch(s)}(e,n):n}function r(n){return!(n.time<3||3e3<n.time)&&(2<=t.push(n)?c():void 0)}return function(n,c){return n.reduce(function(n,t){return n.then(function(e){return c(t).then(function(n){return e.push(n),e})})},a.resolve([]))}(n,function(n){return function(n){var o="".concat(n.cdnUrl,"?t=").concat(Date.now()),e=new URL(o).hostname,p={id:n.id,domain:e,online:navigator&&void 0!==navigator.onLine?Number(navigator.onLine):-1};return u(o).then(function(n){var e=performance.getEntriesByName(o)[0],t=h(e.domainLookupEnd-e.domainLookupStart),c=h(e.connectEnd-e.connectStart),r=0<c?h(e.connectEnd-e.secureConnectionStart):0;return 200<=n.status&&n.status<300&&(p=Object.assign({},p,{up:1,status:n.status,time:Number((e.responseEnd-e.requestStart).toFixed(2)),dnsLookupTime:t,tcpTime:c,sslTime:r,headers:n.getAllResponseHeaders()})),300<=n.status&&n.status<=500&&(p=Object.assign({},p,{up:0,status:n.status,dnsLookupTime:t,tcpTime:c,sslTime:r,headers:n.getAllResponseHeaders()})),p}).catch(function(){return Object.assign({},p,{up:0,status:0})})}(n).then(r)}).then(c)}).then(i,s).then(function(){(e+=1)<p&&setTimeout(n,r)})},3e3)}n=function(){var n=["bot","headless","google","baidu","bing","msn","duckduckbot","teoma","slurp","yandex","phantomjs","pingdom","ahrefsbot"].join("|");if(new RegExp(n,"i").test(window.navigator.userAgent))console.warn("PerfOps RUM not launching due to suspicious userAgent:",window.navigator.userAgent);else if(void 0!==window.performance){if(performance.onresourcetimingbufferfull=function(){i("clear performance resource buffer"),performance.clearResourceTimings()},"function"==typeof a)return l();!function(n,e){var t=document.createElement("script"),c=!1;t.onreadystatechange=t.onload=function(){c||e(),c=!0},t.setAttribute("src",n),document.body.appendChild(t)}("https://cdn.perfops.net/npm/es6-promise-4.2.4/dist/es6-promise.min.js",function(){a=window.ES6Promise,l()})}},"complete"===document.readyState?n():window.addEventListener("load",n)}(window.Promise);